<div dir=rtl>

# لغة "كلمات"

> المطور والمبتكر هو محمد سامي، هذا ما نعرفه إلى الآن عنه، الاسم فقط.
>
> الكلمات هنا مقتبس كثير منها من الموقع الرسمي من ويب أركيف.
>
> بدأ العمل على اللغة عام 2011  وتوقف عام 2013 وفقا لما [يظهره موقع ويب أركيف.](http://web.archive.org/web/2013*/http://www.kalimat-lang.com/wiki/%D8%B9%D9%86_%D9%83%D9%84%D9%85%D8%A7%D8%AA)
>
> خريطة تطوير اللغة: [./خارطة-الطريق.md](./خارطة-الطريق.md).

<img alt="شعار" align="right" src="./assets/logo.png" width="100">
<samp><p align="justify" style="text-indent:40px;"> "لغة <b>كلمات</b>, لغة برمجة عربية جديدة لتعليم الأطفال البرمجة. اللغة سهلة الاستخدام لكنها اقوى مما تبدو عليه!. اللغة مفتوحة المصدر ومتاحة بالمجان. اللغة جزء من خطة طويلة المدى للمساهمة في النهضة العلمية بالمجتمع."، هذا كان كلام محمد سامي من الصفحة الرسمية للغة، مع تصريف بسيط، وهنا سأحاول جمع كل ما يمكن عن اللغة ومصادر تعلمها والأمثلة والتطبيقات بها. </p></samp> 


<div align="center">
<img alt="لقطة شاشة" src="./assets/screenshot.png" />
</div>

---

# عن كلمات

> مقتبس من الموقع الرسمي: http://web.archive.org/web/20121226145141/http://www.kalimat-lang.com/wiki/%D8%B9%D9%86_%D9%83%D9%84%D9%85%D8%A7%D8%AA

## قديماً كانت البرمجة وسيلة للتعبير عن النفس

في طفولتي كان كثير من الأطفال يبرمجون على كمبيوتر صخر وسائر الأجهزة المنزلية (كومودور، تكساس، سنكلير...)، لم يكن احد منهم يعرف انه هناك وظيفة اسمها مبرمج، بل كانوا يفعلون ذلك ليكتبوا ألعاباً وبرامجاً ويعبروا عن انفسهم بالضبط كمن يرسم أو يؤلف القصص أو يكتب الشعر. الأكثر من ذلك أن البيئة نفسها كانت تساعدهم على ذلك: الكتب والمجلات ومحلات الكمبيوتر كانت كلها تكون بيئة تشجع أي طفل على البرمجة.

<table align=center>
  <tr>
    <td><img src="./assets/sakhr-logo-tamareen.png" /></td>
    <td><img src="./assets/learn-msx-basic.png" /></td>
    <td><img src="./assets/walt-disney-computer.png" /></td>
  </tr>
</table>

# ووسيلة للتعبير عن النفس للكبار أيضاً

حين كنت طالباً بكلية الحاسبات، كنت اكتب برامجاً رسومية صغيرة (مؤثرات، أشياء تتحرك) واضعها على كمبيوتر في السكشن ليراها الآخرون..مع الوقت صار هناك سباق بيني وبين الزملاء، كل شخص يأتي في المرة التالية ومعه برنامجاً أعقد ممن سبقه. كانت البرمجة هنا شيئاً يتنافس الناس عليه. شيء "روش" إن صح التعبير. وحين يشعر الشاب بأن الشيء روش، فلن تحتاج أن تضغط عليه لكي يتعلمه.

# لكن الأمور قد تغيرت

الاطفال والكبار الآن مستخدمون للتكنولوجيا لا صانعون لها. حتى المبرمجين، لم يعد عملهم يتعدى تركيب المكونات على بعضها. أين الاستمتاع بالبرمجة؟ أين الإبداع؟ لماذا نقضي الشهور في حوارات على غرار "الجافا افضل أم الدوت نت" أو "لينكس أفضل أم الويندوز"؟ لماذا نتجادل في انتاج الآخرين بدلاً من أن نتكلم عن برامجنا نحن؟

يقول أحد المبرمجين الأمريكان: حين يختفي الإبداع يتخذ الناس الذوق بديلاً عن المهارة. أي أنه إن كنت انا غير مبدع وانت غير مبدع فكيف انافسك؟ بدلا من ان اقول "انظر لقدرات برنامجي" سأقول "انا اخترت لغة افضل منك"!

لقد نسينا متعة البرمجة، وقد آن لنا أن نتذكرها.

# هيا نغير الأمور للأفضل

نريد إعادة روح الإبداع والتنافس للعالم البرمجي في الوطن العربي. من أجل هذا صنعنا لغة كلمات وهي سلاح نراه قوياً في هذا الأمر. لماذا؟

- لأنها سهلة الاستخدام وسهلة التعلم، مما يتيح لعدد أكبر بكثير ان يدخلوا مجال البرمجة، وأن يدخلوها في سن مبكر حيث الاهتمام بالاستمتاع والتعبير عن النفس وليس البرمجة لأسباب وظيفية.
- تتيح البرمجة باللغة العربية، مما يسمح لشريحة أوسع من المجتمع أن تدخل في هذا العالم، وتزيح عائقاً أمام كثير من الاطفال الاذكياء لكن لم يتعلموا الانجليزية.
- الإبداع بالرسوم والألعاب سهل في كلمات: لا تحتاج إلى تركيب مكتبة مثل SDL أو DirectX أو PyGame كي تبدأ: كل شيء موجود بالفعل كجزء من الأوامر الاساسية للغة.
- اللغة نفسها قوية وتنمو بنمو قدرات المبرمج، فيمكن استخدام اوامر صغيرة اولا لتكون لغة شبيهة بلغة البيسك القديمة، ثم الانتقال بعد ذلك للإجراءات، البرمجة الكائنية OOP، وحتى البرمجة المتوازية!
- بيئة التطوير الخاصة باللغة مصممة من أجل التعليم، ونفخر أن يكون بها إمكانات خصيصاً لذلك:

- 1. يمكنك أن تنسخ الكود بصيغة HTML مع ضبط المحاذاة وتلوين الكلمات، لتضع الكود بسهولة على مدونتك أو على منتدى تعليمي.
  2. يمكن كذلك نسخها بصيغة Wiki لكي يتعاون الناس على تصميم كتب لها عبر الإنترنت.
  3. بها إمكانية تتبع سير البرنامج أثناء تنفيذه (المراقب العجيب).
  4. بها debugger.
- ...وهناك إمكانات اخرى يخطط لها.

# لم ننس الجانب الاجتماعي أيضاً

نحن نؤمن أن نجاح لغة مثل كلمات مرتبط بالبيئة الاجتماعية التي تظهر فيها وليس فقط الجانب التكنولوجي. لذلك تحدثنا مع مراكز تدريبية (من التي تعلم الاطفال البرمجة) لمناقشة إمكانية إضافتها لمناهجهم، ونتحدث كذلك مع المدارس.

هناك أيضاً عمل يبذل الآن لإنتاج كتب تضاهي كتب البرمجة الرائعة التي كانت تقدم للأطفال في الثمانينات، ونسعى في المستقبل لوجود أكبر على الإنترنت بعمل موقع مشاركة مثلما تم في سكراتش بحيث يمكن للجميع مشاركة برامجهم واستعراضها. نتمنى أيضاً بشدة أن يكون الجانب الاجتماعي اكبر من مجهوداتنا فحسب، وأن يظهر بإذن الله مواقع ومنتديات عن البرمجة للأطفال ومنتديات تعليم البرمجة في المدارس،...الخ تكون مستقلة عنا وتتحرك للأمام في مساراتها الخاصة.

أخيراً نفكر بجدية في مسألة تطبيق لغات البرمجة العربية في مشاريع احترافية، ونتمنى على المدى الطويل رفع مستوى كلمات لإمكانات اقوى مع الحفاظ على اهدافها التعليمية أو - إن لم يتسن ذلك - تطوير لغة برمجة عربية احترافية موازية.

<table align=center>
  <tr>
    <td><img align=center src="./assets/pic1.png" /></td>
    <td><img align=center src="./assets/pic2.png" /></td>
  </tr>
</table>
# كلمات: استدعاء إجراءات سي

إمكانات كثيرة يريدها المبرمج: رسومات ثلاثية الأبعاد، مؤثرات صوتية، اتصال بالإنترنت، تعامل مع نظام التشغيل... حين اضفت إمكانيات الGUI كان لابد أن أغير المفسر interpreter، لأن مفسر كلمات كان حلقة الاتصال الوحيدة بين اللغة وبين العالم الخارجي. هل سيحدث نفس الشيء مع كل الإمكانيات الأخرى؟

لا ينبغي تغيير مفسر اللغة كل مرة يُحتاج فيها لإضافة إمكانية، لذلك كان لابد من تغيير هذا الوضع...

[**ملاحظة هامة:** لن تعمل هذه الأمثلة إلا على إصدار اغسطس 2011 أو أحدث. يمكنك تحميل أحدث إصدارة من [هنا](http://web.archive.org/web/20111028171719/http://www.kalimat-lang.com/) أو [هنا](http://web.archive.org/web/20111028171719/http://code.google.com/p/kalimat/downloads)].

كل اللغات المعروفة تقريباً فيها إمكانية التعامل مع الدوال الخارجية (Foreign function interface) أو FFI، وهذا في أغلب الأحيان يساوي إمكانية للتعامل مع مكتبات الربط DLL المكتوبة بالسي. هذه الإمكانية الآن موجودة في كلمات أيضاً. مثال بسيط على هذا؛ دالة MessageBox:

```
مكتبة "user32.dll" :
دالة رسالة برمز "MessageBoxW" ( مشير.سي،
                             نص.سي،
                             نص.سي،
                             صحيح32.سي ) صحيح32.سي
نهاية
م = رسالة ( 0 ، "هذه العملية سوف تدمر كل شيء!!"،
         "هل أنت متأكد؟" ، 3 )
```

هذه أول مرة نرى فيها Type declarations في كلمات! نحن لا نستخدمها إلا في حالة الـFFI لكن من يدري؟ قد نراها مستقبلاً في أدوار أخرى...

لاحظ في المثال السابق أن نوع القيمة القيمة الراجعة من الدالة (وهو صحيح32.سي) مكتوب في آخر السطر المعرفة فيه الدالة نفسها. ماذا لو كنا نريد استدعاء void function؟ في تلك الحالة نعرف إجراء بدلا من دالة ولا نذكر القيمة الراجعة.

قبل أن نكمل هذا مرجع سريع لأنواع البيانات المستخدمة في التعامل مع إجراءات السي:

| النوع في لغة سي | النوع في كلمات |
| --------------- | -------------- |
| int             | صحيح32.سي      |
| float           | طفوي.سي        |
| long            | طويل.سي        |
| double          | مزدوج.سي       |
| char            | حرفي.سي        |
| char *          | نص.آسكي.سي     |
| wchar_t *       | نص.سي          |
| void *          | مشير.سي        |

لاحظ أن **نص.آسكي.سي** يعمل مع الحروف الانجليزية، بينما **نص.سي** يقبل حروف اليونيكود - ومنها الحروف العربية، والموضوع يعتمد بالطبع على نوع البيانات الذي تقبله الدالة: مثلاً في ويندوز الدالة MessageBoxA تستخدم آسكي بينما MessageBoxW تستخدم يونيكود.


ها هنا مثال آخر، لكن هذه المرة على نسخة كلمات على لينكس، يوضح استخدام دالة getenv:

```
مكتبة "libc.so.6" :
دالة بيئة برمز "getenv" ( نص.آسكي.سي ) نص.آسكي.سي
نهاية
م = بيئة ( "PATH" )
اطبع م
```

يحاول مفسر كلمات التصرف "بعقل" قدر الإمكان، فمثلاً قام بتحويل النص المقدم للدالة من يونيكود (وهو الصيغة الداخلية لكل نصوص كلمات) إلى آسكي قبل استدعاء الدالة. نفس الشيء يحدث لو كانت الدالة تريد قيمة عدد حقيقي وأرسل لها مثلاً عدد صحيح.



ماذا عن الدوال التي تأخد قيماً أعقد من integer أو نص؟ تعال نتخيل أن لدينا مكتبة DLL فيها دالة اسمها TestPoint تأخذ عاملاً بهذا الشكل:

<div dir=ltr>

```c
struct POINT
{
long x; long y;
};
```

</div>

لا يمكن في تلك الحالة الاكتفاء بإرسال كائن بفصيلة مصنوعة بكلمات، لأن المفسر سيعجز عن معرفة طريقة نقل (أو تسيير، marshalling) كل بيان من كلمات إلى مكانه الصحيح في الذاكرة لتتمكن دالة السي من استخدامه.

هذا بسبب أن معلومات POINT موجودة لدى مترجم السي وحده، ولو أردنا استخدامها من كلمات سيكون علينا إعادة تعريف هذه المعلومات:

```
فصيلة نقطة :
له س تسييره طويل.سي
له ص تسييره طويل.سي
نهاية

مكتبة "simple_dll.dll" :
دالة اختبر.نقطة برمز "TestPoint" ( نقطة ) صحيح32.سي
نهاية

ن = نقطة جديد
س ن = 130
ص ن = 180
ذ = اختبر.نقطة ( ن )
اطبع ذ
```

هنا فصيلة **نقطة** هي فصيلة عادية جدا، فقط أضفنا معلومات عن كيفية استخدام قيم س، ص عند ارسال نقطة لدالة سي. يمكننا - إن أردنا - أن نضيف المزيد من الfields أو الmethods لفصيلتنا، ولكن عند تقديمها لدالة سي لن يتم التعامل إلا مع البيانات المعرف لها "تسيير".



هيا نكتب الآن مثالاً أطول يستخدم Windows API. سوف نكتب برنامجاً يرسم مستطيلاً أسوداً في منتصف الشاشة - في منتصف الشاشة الحقيقية وليس نافذة كلمات.



أولاً نكتب هذا البرنامج بلغة سي ثم "نترجمه" خطوة خطوة:

HDC dc = GetDC(0); // Retrieve device context of whole screen
HBRUSH brush = GetStockObject(BLACK_BRUSH);
RECT r;
r.left = 800;
r.top = 600;
r.right = 1000;
r.bottom = 700;
FillRect(dc, &r, brush);


يستخدم البرنامج هنا ثلاث دوال سي: GetDC، GetStockObject، FillRect



ويستخدم أيضاً نوع بيانات جديد هو RECT. فلنعرفه أولاً:

```
فصيلة مستطيل :
له يسار تسييره طويل.سي
له قمة تسييره طويل.سي
له يمين تسييره طويل.سي
له قاع تسييره طويل.سي
نهاية
```

الآن نعرف الدوال المطلوبة:

مكتبة"user32.dll" : 
    دالة مجال.رسم برمز"GetDC" ( مشير.سي ) مشير.سي 

```
    دالة املأ.مستطيل برمز "FillRect" ( مشير.سي ، مشير ( مستطيل ) ، مشير.سي ) صحيح32.سي
نهاية

مكتبة "gdi32.dll" :
    دالة عنصر.رسم.جاهز برمز "GetStockObject" ( صحيح32.سي ) مشير.سي
نهاية
```

لاحظ أننا في الدالة FillRect لا نرسل مستطيلاً، بل نرسل مشير pointer إلى مستطيل..وحين استدعينا الدالة في السي لم نرسل المستطيل r بل أرسلنا عنوانه في الذاكرة r&..سينعكس هذا على كود كلمات أيضاً.



لاحظ أيضاً أننا في الأنواع تحت صنف HANDLE مثل HDC أو HBRSUH نستخدم **مشير.سي**

**
**(تسيير..مشير..لقد صارت اللغة سياسية أكثر من اللازم. الإصدارة القادمة لابد من أمر اسمه أجندة لتكتمل الصورة)**
**
الآن نكتب برنامجنا:

```
ط = مستطيل جديد
يسار ط = 800
قمة ط = 600
يمين ط = 1000
قاع ط = 700

م = مجال.رسم ( 0 )
الفرشاة = عنصر.رسم.جاهز ( 4 )
املأ.مستطيل ( م ، عنوان ( ط ) ، الفرشاة )
```

عند تنفيذ البرنامج سوف يظهر مستطيل أسود على الشاشة. قد لا يظهر المستطيل كاملاً لو تقاطع مع نافذة البرنامج، لأن تلك النافذة ترسم نفسها باستمرار.

ليس أكثر عرض شيق في العالم، كما أن إمكانية FFI في صورتها الحالية لم تكتمل، ومليئة بالأخطاء، وتسبب memory leaks مثل المصفاة...لكن الكود، حتى في تلك الصورة، تثبت أننا نسير في الطريق الصحيح: لقد بدأت لغة كلمات تقترب من اللغات الإحترافية. من يدري ماذا يمكن أن يُعمل بها الآن..ربما يضيف أحد مكتبة تستخدم OpenGL.

أو ربما تتصل بقواعد بيانات. أو يصمم بها برامج شبكية. لا أدري - لقد صار الباب مفتوحاً لغيري الآن :)

